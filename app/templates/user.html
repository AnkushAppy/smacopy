{% extends "base.html" %}

{% block content %}
	<a href="/user" name="Home">
		Home
	</a>
|
    <a href="/logout" name="logout" >
        Logout
    </a>

    <p>
        {% if relation %}
        	{% if relation == 'New' %}
				You are visiting {{ username_obj.username }}!! email: {{ username_obj.email}}. <br>
				status: <a href="/user/add/{{username_obj.username}}">Add Friend</a>
        	{% elif relation.status == 'Accepted' %}
        		You are visiting {{ username_obj.username }}!! email: {{ username_obj.email}}.<br>
				Current status: {{relation.status}} | <a href="/user/unfriend/{{username_obj.username}}">Unfriend</a><br>
				Action taken by: {{relation.action_username}}
            {% elif relation.status == 'Rejected' %}
				You are visiting {{ username_obj.username }}!! email: {{ username_obj.email}}. <br>
				Current status: {{relation.status}} <a href="/user/add/{{username_obj.username}}">Add Friend</a><br>
				Action taken by: {{relation.action_username}}
        	{% elif relation.status == 'pending' %}
				You are visiting {{ username_obj.username }}!! email: {{ username_obj.email}}.
				Current status: {{relation.status}} <br>
				Action taken by: {{relation.action_username}} |
					{% if relation.action_username != username %}
						<a href="/user/add/{{username_obj.username}}">Confirm</a> |
						<a href="/user/reject/{{username_obj.username}}">Reject</a>
					{% endif %}
			{% else %}
				You are visiting {{ username_obj.username }}!! email: {{ username_obj.email}}.
				Current status: {{relation.status}}<br>
				Action taken by: {{relation.action_username}}
        	{% endif %}
        {% else %}
        	Hello {{ username_obj.username }}!! Your email: {{ username_obj.email}}
        {% endif %}
    </p>	
    <hr>
    <B>Friends</B>
    {% for frnd in frndlist1 %}
    	{% if frnd.status == 'Accepted' %}
    		<li><a href="/user/{{ frnd.second_username}}">{{frnd.second_username}}</a></li>
    	{% endif %}
    {% endfor %}
    {% for frnd in frndlist2 %}
		{% if frnd.status == 'Accepted' %}
			<li><a href="/user/{{ frnd.first_username}}">{{ frnd.first_username}}</a></li>
		{% endif %}
    {% endfor %}
    
    <hr>
    
    {% if relation == None %}
    <B>Confirm friend request</B>
	    {% for frnd in frndlist2 %}
			{% if frnd.status == 'pending' %}
				<li><a href="/user/{{ frnd.first_username}}">{{ frnd.first_username}}</a>
					| <a href="/user/add/{{frnd.first_username}}">Confirm</a>
					| <a href="/user/reject/{{frnd.first_username}}">Reject</a>

				</li>
			{% endif %}
	    {% endfor %}
	{% endif %}
{% endblock %}